<%= form_with(
  model: ['post', document],
  local: true,
  multipart: true,
  data: { controller: 'form-validation-error' }
) do |form| %>
<% if document.errors.any? %>
  <div id="error_explanation">
    <% document.errors.messages.each do |attribute, error_messages| %>
      <div
        data-target="form-validation-error.error"
        data-error-attribute="<%= attribute %>"
        >
        <% error_messages.each do |error_message| %>
          <div data-error-message="<%= error_message %>"></div>
        <% end %>
      </div>
    <% end %>
  </div>

  <%= render 'shared/invalid_feedback' %>
<% end %>

<div class="form-group">
  <%= form.label :attachment %>
  <%= form.file_field(
    :attachment,
    class: "form-control-file",
    data: {
      target: 'form-validation-error.attribute',
      form_attribute: 'attachment'
    }
  ) %>
</div>

<div class="form-group">
  <%= form.label :annotation %>
  <%= form.text_field(
    :annotation,
    class: "form-control",
    data: {
      target: 'form-validation-error.attribute',
      form_attribute: 'annotation'
    }
  ) %>
</div>

<div class="actions">
  <%= form.submit 'Create Attachment', class: "btn btn-success" %>
</div>
    <% end %>

